---
title: 开发经验汇总和一些问题的解决方法
date: 2018-09-17 14:18:49
tags:
categories: 开发经验
---

#### js深拷贝浅拷贝
* Object.create()为对象层面的深拷贝

* Object.assign()当对象只有一层时为深拷贝，当有嵌套对象时为深拷贝


### 对象多个属性赋值
```javascript
Vue.options.components = {}
Vue.options.directives = {};
Vue.options.filters = {};

// 相当于,且更方便维护
const ASSET_TYPES = ['component','directive','filter'];
ASSET_TYPES.forEach(type => {Vue.options[type + 's'] = Object.create(null)});
```

### 使用js+css实现粘性布局

```javascript
// 获取滚动的总高度
  getScrollTop() {
    let scrollTop = 0;
    let bodyScrollTop = 0;
    let documentScrollTop = 0;
    if (document.body) {
      bodyScrollTop = document.body.scrollTop;
    }
    if (document.documentElement) {
      documentScrollTop = document.documentElement.scrollTop;
    }
    scrollTop = (bodyScrollTop - documentScrollTop > 0) ? bodyScrollTop : documentScrollTop;
    return scrollTop;
  },
  // 文档的总高度
  getScrollHeight() {
    let scrollHeight = 0;
    let bodyScrollHeight = 0;
    let documentScrollHeight = 0;
    if (document.body) {
      bodyScrollHeight = document.body.scrollHeight;
    }
    if (document.documentElement) {
      documentScrollHeight = document.documentElement.scrollHeight;
    }
    scrollHeight = (bodyScrollHeight - documentScrollHeight > 0) ? bodyScrollHeight : documentScrollHeight;
    return scrollHeight;
  },
  // 获取可见页面的总高度
  getWindowHeight() {
    let windowHeight = 0;
    if (document.compatMode === 'CSS1Compat') {
      windowHeight = document.documentElement.clientHeight;
    } else {
      windowHeight = document.body.clientHeight;
    }
    return windowHeight;
  },
  window.onscroll = function(){
    if(getScrollTop() + getWindowHeight() == getScrollHeight()){
      alert("已经到最底部了！!");
    }
  };
```
